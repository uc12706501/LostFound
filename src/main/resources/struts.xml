<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">
<struts>

	<!-- 带有身份验证的基础包 -->
	<package name="home-package" extends="struts-default"
		namespace="/">
		<interceptors>
			<interceptor name="security"
				class="com.lkk.lostfound.security.SecurityInterceptor"></interceptor>
			<interceptor-stack name="securedBasicStack">
				<interceptor-ref name="security"></interceptor-ref>
				<interceptor-ref name="paramsPrepareParamsStack"></interceptor-ref>
			</interceptor-stack>
		</interceptors>

		<default-interceptor-ref name="securedBasicStack"></default-interceptor-ref>

		<global-results>
			<result name="notLogon" type="redirectAction">
				<param name="actionName">notLogon</param>
			</result>
			<result name="noPermission" type="redirectAction">
				<param name="actionName">noPermission</param>
			</result>
		</global-results>

		<action name="notLogon">
			<result>/WEB-INF/jsp/notLogon.jsp</result>
		</action>
		<action name="noPermission">
			<result>/WEB-INF/jsp/noPermission.jsp</result>
		</action>
	</package>

	<!-- Home -->
	<package name="home" namespace="/" extends="home-package">
		<action name="index" class="com.lkk.lostfound.action.IndexAction">
			<result name="success">/WEB-INF/jsp/index.jsp</result>
		</action>
	</package>

	<!-- User -->
	<package name="user" namespace="/user" extends="home-package">
		<action class="com.lkk.lostfound.action.user.LogonAction" name="logon">
			<result name="input">/WEB-INF/jsp/user/logon.jsp</result>
		</action>
		<action name="confirm" class="com.lkk.lostfound.action.user.LogonAction"
			method="confirm">
			<result name="input">/WEB-INF/jsp/user/logon.jsp</result>
			<result name="adminIndex" type="redirectAction">
				<param name="actionName">index</param>
				<param name="namespace">/admin</param>
			</result>
			<result name="success" type="redirectAction">
				<param name="actionName">index</param>
				<param name="namespace">/</param>
			</result>
		</action>

		<action name="register" class="com.lkk.lostfound.action.user.RegisterAction">
			<result name="input">/WEB-INF/jsp/user/register.jsp</result>
		</action>
		<action name="confirmReg" class="com.lkk.lostfound.action.user.RegisterAction"
			method="confirm">
			<result name="input">/WEB-INF/jsp/user/register.jsp</result>
			<result name="success" type="redirectAction">
				<param name="actionName">logon</param>
			</result>
		</action>

		<action name="logoff" class="com.lkk.lostfound.action.user.LogoffAction">
			<result type="redirectAction">
				<param name="actionName">index</param>
				<param name="namespace">/</param>
			</result>
		</action>

		<action name="changePwd"
			class="com.lkk.lostfound.action.user.ChangePasswordAction">
			<result name="input">/WEB-INF/jsp/user/changePassword.jsp</result>
		</action>
		<action name="confirmChange"
			class="com.lkk.lostfound.action.user.ChangePasswordAction" method="confirmChange">
			<result name="input">/WEB-INF/jsp/user/changePassword.jsp</result>
			<result name="success" type="redirectAction">
				<param name="actionName">changePwd</param>
			</result>
		</action>

		<action name="insert" class="com.lkk.lostfound.action.user.LogonAction"
			method="insert">
			<result type="redirectAction">
				<param name="actionName">logon</param>
			</result>
		</action>

	</package>

	<!-- Item -->
	<package name="item" namespace="/item" extends="home-package">
		<action name="add" class="com.lkk.lostfound.action.item.AddItemAction"
			method="input">
			<result name="pickedItem">/WEB-INF/jsp/item/pickeditem-create.jsp</result>
			<result name="lostItem">/WEB-INF/jsp/item/lostitem-create.jsp</result>
		</action>

		<action name="save" class="com.lkk.lostfound.action.item.AddItemAction">
			<result name="success" type="redirectAction">
				<param name="actionName">details</param>
				<param name="clazz">${clazz}</param>
				<param name="id">${id}</param>
			</result>
			<result name="pickedItem">/WEB-INF/jsp/item/pickeditem-create.jsp</result>
			<result name="lostItem">/WEB-INF/jsp/item/lostitem-create.jsp</result>
		</action>

		<action name="details" class="com.lkk.lostfound.action.item.ItemDetails">
			<result name="pickedItem">/WEB-INF/jsp/item/pickeditem-details.jsp</result>
			<result name="lostItem">/WEB-INF/jsp/item/lostitem-details.jsp</result>
		</action>

		<action name="getImage" class="com.lkk.lostfound.action.item.GetImageAction">
			<result name="success" type="stream">
				<param name="contentType">image</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>

		<action name="lostItems" class="com.lkk.lostfound.action.item.ItemsListAction">
			<param name="clazz">lostItem</param>
			<result>/WEB-INF/jsp/item/listItems.jsp</result>
		</action>
		<action name="pickedItems" class="com.lkk.lostfound.action.item.ItemsListAction">
			<param name="clazz">pickedItem</param>
			<result>/WEB-INF/jsp/item/listItems.jsp</result>
		</action>
		<action name="itemsList" class="com.lkk.lostfound.action.item.ItemsListAction">
			<result>/WEB-INF/jsp/item/listItems.jsp</result>
		</action>

		<action name="myitems" class="com.lkk.lostfound.action.item.UserItemsAction">
			<result>/WEB-INF/jsp/item/myitems.jsp</result>
		</action>

		<action name="switchStatus" class="com.lkk.lostfound.action.item.SwitchStatusAction">
			<result type="redirectAction">
				<param name="actionName">myitems</param>
				<param name="namespace">/item</param>
				<param name="clazz">${clazz}</param>
			</result>
		</action>

	</package>

	<!-- Announcement -->
	<package name="announcement" namespace="/anno" extends="home-package">
		<action name="getIndexAnnos"
			class="com.lkk.lostfound.action.announcement.GetIndexAnnosAction">
			<result name="success">/WEB-INF/jsp/announcement/indexAnnos.jsp</result>
		</action>
	</package>

	<!-- Message -->
	<package name="message" namespace="/message" extends="home-package">
		<action name="save"
			class="com.lkk.lostfound.action.message.SaveMessageAction">
			<result name="success" type="redirectAction">
				<param name="actionName">details</param>
				<param name="namespace">/item</param>
				<param name="clazz">${clazz}</param>
				<param name="id">${itemId}</param>
			</result>
		</action>
	</package>

	<!-- Admin Home -->
	<package name="admin-home" namespace="/admin" extends="home-package">
		<action name="index" class="com.lkk.lostfound.action.AdminIndexAction">
			<result name="success">/WEB-INF/jsp/admin/index.jsp</result>
		</action>
	</package>

	<!-- Admin Announcement -->
	<package name="admin-anno" namespace="/admin/announcement"
		extends="home-package">
		<action name="index"
			class="com.lkk.lostfound.action.announcement.IndexAction">
			<result name="success">/WEB-INF/jsp/admin/announcement/index.jsp
			</result>
		</action>

		<action name="create"
			class="com.lkk.lostfound.action.announcement.CreateAction">
			<result name="input">/WEB-INF/jsp/admin/announcement/create.jsp
			</result>
		</action>

		<action name="confirmCreate"
			class="com.lkk.lostfound.action.announcement.CreateAction" method="confirm">
			<result type="redirectAction">index</result>
			<result name="input">/WEB-INF/jsp/admin/announcement/create.jsp
			</result>
		</action>

		<action name="getImage"
			class="com.lkk.lostfound.action.announcement.GetImageAction">
			<result name="success" type="stream">
				<param name="contentType">image</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>
	</package>
</struts>
